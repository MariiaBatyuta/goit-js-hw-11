{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.js-gallery');\nconst input = document.querySelector('.input-string');\nconst form = document.querySelector('.input-wrap');\nconst photoLoader = document.getElementById('photo-loader');\n\nconst BASIC_URL = 'https://pixabay.com/api/';\nconst KEY = '41857217-9df28d1efe56a78287de94859';\n\nlet inputValue = '';\n\nconst lightbox = new SimpleLightbox('.gallery-image-lightbox', {\n    captions: true, \n    captionPosition: 'bottom', \n    captionsData: 'alt', \n    close: true, \n    loop: true, \n    enableKeyboard: true, \n    slideSpeed: 400, \n});\n\nconst onInput = (e) => { \n    inputValue = e.target.value;\n}\ninput.addEventListener('input', onInput);\n\nform.addEventListener('submit', onClick);\nfunction onClick(e) {\n    e.preventDefault();\n\n    if (inputValue.trim() === '') {\n        iziToast.error({ title: 'Error', message: 'Please, type a search query' });\n        photoLoader.classList.remove('loader'); \n        return;\n    }\n\n    photoLoader.classList.add('loader');\n\n    fetch(`${BASIC_URL}?key=${KEY}&q=${inputValue}&image_type=photo&orientation=horizontal&safesearch=true`)\n        .then(res => res.json())\n        .then(images => {\n            if (images.total === 0) return iziToast.error({ title: 'Error', message: 'Sorry, there are no images matching your search query. Please try again!' })\n           \n            const imagePromises = images.hits.map(img => loadImage(img.webformatURL));\n\n            Promise.all(imagePromises)\n                .then(() => {\n                    const marcup = images.hits.reduce((html, img) => html + `\n                <li class=\"gallery-item\">\n                    <a href=\"${img.largeImageURL}\" class=\"gallery-image-lightbox\">\n                        <img class=\"gallery-image\"\n                            src=\"${img.webformatURL}\"\n                            alt=\"${img.tags}\"\n                        />\n                    </a>\n                    <div class=\"photo-info\">\n                        <p class=\"item-info\"><b>Likes</b><br>${img.likes}</p>\n                        <p class=\"item-info\"><b>Views</b><br>${img.views}</p>\n                        <p class=\"item-info\"><b>Comments</b><br>${img.comments}</p>\n                        <p class=\"item-info\"><b>Dowloads</b><br>${img.downloads}</p>\n                    </div>\n                </li>`, '');\n                    gallery.innerHTML = marcup;\n                    \n                    lightbox.refresh();\n                })\n                .catch(() => {\n                    iziToast.error({ title: 'Error', message: 'Error loading photos' });\n                })\n                .finally(() => {\n                    input.value = '';\n                    photoLoader.classList.remove('loader'); \n                });\n        })\n        .catch(() => {\n            iziToast.error({ title: 'Error', message: 'Error fetching photos' });\n            photoLoader.classList.remove('loader');\n        }) \n};\n\nfunction loadImage(url) {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n        image.onload = resolve;\n        image.onerror = reject;\n        image.src = url;\n    });\n}"],"names":["gallery","input","form","photoLoader","BASIC_URL","KEY","inputValue","lightbox","SimpleLightbox","onInput","e","onClick","iziToast","res","images","imagePromises","img","loadImage","marcup","html","url","resolve","reject","image"],"mappings":"6vBAMA,MAAMA,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAc,SAAS,eAAe,cAAc,EAEpDC,EAAY,2BACZC,EAAM,qCAEZ,IAAIC,EAAa,GAEjB,MAAMC,EAAW,IAAIC,EAAe,0BAA2B,CAC3D,SAAU,GACV,gBAAiB,SACjB,aAAc,MACd,MAAO,GACP,KAAM,GACN,eAAgB,GAChB,WAAY,GAChB,CAAC,EAEKC,EAAWC,GAAM,CACnBJ,EAAaI,EAAE,OAAO,KAC1B,EACAT,EAAM,iBAAiB,QAASQ,CAAO,EAEvCP,EAAK,iBAAiB,SAAUS,CAAO,EACvC,SAASA,EAAQD,EAAG,CAGhB,GAFAA,EAAE,eAAc,EAEZJ,EAAW,KAAM,IAAK,GAAI,CAC1BM,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,6BAA6B,CAAE,EACzET,EAAY,UAAU,OAAO,QAAQ,EACrC,MACH,CAEDA,EAAY,UAAU,IAAI,QAAQ,EAElC,MAAM,GAAGC,SAAiBC,OAASC,2DAAoE,EAClG,KAAKO,GAAOA,EAAI,MAAM,EACtB,KAAKC,GAAU,CACZ,GAAIA,EAAO,QAAU,EAAG,OAAOF,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,0EAA0E,CAAE,EAErJ,MAAMG,EAAgBD,EAAO,KAAK,IAAIE,GAAOC,EAAUD,EAAI,YAAY,CAAC,EAExE,QAAQ,IAAID,CAAa,EACpB,KAAK,IAAM,CACR,MAAMG,EAASJ,EAAO,KAAK,OAAO,CAACK,EAAMH,IAAQG,EAAO;AAAA;AAAA,+BAE7CH,EAAI;AAAA;AAAA,mCAEAA,EAAI;AAAA,mCACJA,EAAI;AAAA;AAAA;AAAA;AAAA,+DAIwBA,EAAI;AAAA,+DACJA,EAAI;AAAA,kEACDA,EAAI;AAAA,kEACJA,EAAI;AAAA;AAAA,uBAE9C,EAAE,EACNhB,EAAQ,UAAYkB,EAEpBX,EAAS,QAAO,CACpC,CAAiB,EACA,MAAM,IAAM,CACTK,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,sBAAsB,CAAE,CACtF,CAAiB,EACA,QAAQ,IAAM,CACXX,EAAM,MAAQ,GACdE,EAAY,UAAU,OAAO,QAAQ,CACzD,CAAiB,CACjB,CAAS,EACA,MAAM,IAAM,CACTS,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,uBAAuB,CAAE,EACnET,EAAY,UAAU,OAAO,QAAQ,CACjD,CAAS,CACT,CAEA,SAASc,EAAUG,EAAK,CACpB,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACpC,MAAMC,EAAQ,IAAI,MAClBA,EAAM,OAASF,EACfE,EAAM,QAAUD,EAChBC,EAAM,IAAMH,CACpB,CAAK,CACL"}